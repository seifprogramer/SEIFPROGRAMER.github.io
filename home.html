<!-- home.html -->
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Flost Home</title>
</head>
<body>
<h1>Flost Home</h1>
<p id="welcome">Loading...</p>

<script>
// Check if user is logged in by looking for a token in localStorage
const token = localStorage.getItem("github_token");

if (!token) {
    // Not logged in → redirect to main page
    window.location.href = "/";
} else {
    // Logged in → fetch user info
    fetch("https://api.github.com/user", {
        headers: { Authorization: `token ${token}` }
    })
    .then(res => res.json())
    .then(data => {
        document.getElementById("welcome").innerText = `Hello, ${data.login}!`;
    })
    .catch(err => {
        console.error(err);
        // If token invalid → redirect
        window.location.href = "/";
    });
}
</script>
</body>
</html>
