<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Flost Home</title>
</head>
<body>
<h1>Flost Home</h1>
<p id="welcome">Loading...</p>

<script>
const token = localStorage.getItem("github_token");

if (!token) {
    window.location.href = "/";
} else {
    fetch("https://api.github.com/user", {
        headers: { Authorization: `token ${token}` }
    })
    .then(res => res.json())
    .then(data => {
        document.getElementById("welcome").innerText =
            `Hello, ${data.login}! You can now view the repo.`;
    })
    .catch(err => {
        console.error(err);
        window.location.href = "/";
    });
}
</script>
</body>
</html>
